CREATE TABLE roles(
   role_id INT,
   role_name VARCHAR(50) NOT NULL,
   role_code INT NOT NULL,
   PRIMARY KEY(role_id),
   UNIQUE(role_name),
   UNIQUE(role_code)
);

CREATE TABLE criteria(
   criterion_id INT,
   text VARCHAR(100) NOT NULL,
   PRIMARY KEY(criterion_id),
   UNIQUE(text)
);

CREATE TABLE themes(
   theme_id INT,
   text VARCHAR(50) NOT NULL,
   PRIMARY KEY(theme_id),
   UNIQUE(text)
);

CREATE TABLE evaluations(
   evaluation_id INT,
   note INT NOT NULL,
   theme_id INT NOT NULL,
   PRIMARY KEY(evaluation_id),
   UNIQUE(theme_id),
   FOREIGN KEY(theme_id) REFERENCES themes(theme_id)
);

CREATE TABLE progress(
   progress_id INT,
   text TEXT,
   theme_id INT NOT NULL,
   PRIMARY KEY(progress_id),
   UNIQUE(theme_id),
   FOREIGN KEY(theme_id) REFERENCES themes(theme_id)
);

CREATE TABLE vehicles(
   vehicule_id VARCHAR(50),
   name VARCHAR(50) NOT NULL,
   brand VARCHAR(50),
   license_Plate VARCHAR(10),
   type VARCHAR(15),
   PRIMARY KEY(vehicule_id)
);

CREATE TABLE users(
   user_id INT,
   last_name VARCHAR(50) NOT NULL,
   first_name VARCHAR(50) NOT NULL,
   password VARCHAR(50) NOT NULL,
   email VARCHAR(50) NOT NULL,
   phone VARCHAR(10) NOT NULL,
   address VARCHAR(50) NOT NULL,
   zip_code VARCHAR(5),
   town VARCHAR(50),
   user_id_Entreprise INT,
   user_id_Trainer INT,
   role_id INT NOT NULL,
   PRIMARY KEY(user_id),
   UNIQUE(email),
   UNIQUE(phone),
   FOREIGN KEY(user_id_Entreprise) REFERENCES users(user_id),
   FOREIGN KEY(user_id_Trainer) REFERENCES users(user_id),
   FOREIGN KEY(role_id) REFERENCES roles(role_id)
);

CREATE TABLE seances(
   seance_id INT,
   date_time DATETIME NOT NULL,
   center_acp_name VARCHAR(50) NOT NULL,
   observation TEXT,
   seance_code INT,
   vehicule_id VARCHAR(50),
   user_id_Trainer INT,
   user_id_Learner INT,
   PRIMARY KEY(seance_id),
   FOREIGN KEY(vehicule_id) REFERENCES vehicles(vehicule_id),
   FOREIGN KEY(user_id_Trainer) REFERENCES users(user_id),
   FOREIGN KEY(user_id_Learner) REFERENCES users(user_id)
);

CREATE TABLE Possess(
   seance_id INT,
   criterion_id INT,
   PRIMARY KEY(seance_id, criterion_id),
   FOREIGN KEY(seance_id) REFERENCES seances(seance_id),
   FOREIGN KEY(criterion_id) REFERENCES criteria(criterion_id)
);

CREATE TABLE H_1(
   criterion_id INT,
   theme_id INT,
   PRIMARY KEY(criterion_id, theme_id),
   FOREIGN KEY(criterion_id) REFERENCES criteria(criterion_id),
   FOREIGN KEY(theme_id) REFERENCES themes(theme_id)
);

